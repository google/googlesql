[default required_features=JSON_TYPE,JSON_LAX_VALUE_EXTRACTION_FUNCTIONS,JSON_ARRAY_VALUE_EXTRACTION_FUNCTIONS]

[name=json_lax_string_array_sql_null]
SELECT LAX_STRING_ARRAY(NULL);
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>(NULL)}]
==
[name=json_lax_string_array_null]
SELECT LAX_STRING_ARRAY(JSON 'null');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>(NULL)}]
==
[name=json_lax_string_array_bool]
SELECT LAX_STRING_ARRAY(JSON 'true');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>(NULL)}]
==
[name=json_lax_string_array_number]
SELECT LAX_STRING_ARRAY(JSON '10');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>(NULL)}]
==
[name=json_lax_string_array_string]
SELECT LAX_STRING_ARRAY(JSON '"10"');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>(NULL)}]
==
[name=json_lax_string_array_object]
SELECT LAX_STRING_ARRAY(JSON '{"a": 10}');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>(NULL)}]
==
[name=json_lax_string_array_empty]
SELECT LAX_STRING_ARRAY(JSON '[]');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>[]}]
==
[name=json_lax_string_array_nulls]
SELECT LAX_STRING_ARRAY(JSON '[null]');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>[NULL]}]
==
[name=json_lax_string_array_bools]
SELECT LAX_STRING_ARRAY(JSON '[true, false]');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>[known order:"true", "false"]}]
==
[name=json_lax_string_array_bool_strings]
SELECT LAX_STRING_ARRAY(PARSE_JSON('["TRue", "FaLse", "true", "false"]'));
--

ARRAY<STRUCT<ARRAY<>>>[
  {ARRAY<STRING>[known order:"TRue", "FaLse", "true", "false"]}
]
==
[name=json_lax_string_array_strings]
SELECT LAX_STRING_ARRAY(JSON '["foo", "bar",  "null", ""]');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>[known order:"foo", "bar", "null", ""]}]
==
[name=json_lax_string_array_numbers]
SELECT LAX_STRING_ARRAY(JSON '[0.0, -0.0, 1.1, -1.1, 1.5, 1.1e2]');
--

ARRAY<STRUCT<ARRAY<>>>[
  {ARRAY<STRING>[known order:"0", "0", "1.1", "-1.1", "1.5", "110"]}
]
==
[name=json_lax_string_array_number_strings]
SELECT LAX_STRING_ARRAY(JSON '["0", "0.0", "-0.0", "10", "-10", "1.1", "-1.1", "+1.5", "1.1e2"]');
--

ARRAY<STRUCT<ARRAY<>>>[
  {ARRAY<STRING>[known order:
     "0",
     "0.0",
     "-0.0",
     "10",
     "-10",
     "1.1",
     "-1.1",
     "+1.5",
     "1.1e2"
   ]}
]
==
[name=json_lax_string_array_integers]
SELECT LAX_STRING_ARRAY(JSON '[0, 10, -10, 1.1e2]');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>[known order:"0", "10", "-10", "110"]}]
==
[name=json_lax_string_array_int32_limits]
SELECT LAX_STRING_ARRAY(JSON '[-2147483648, 2147483647]');
--

ARRAY<STRUCT<ARRAY<>>>[
  {ARRAY<STRING>[known order:"-2147483648", "2147483647"]}
]
==
[name=json_lax_string_array_int64_limits]
SELECT LAX_STRING_ARRAY(JSON '[-9223372036854775808, 9223372036854775807]');
--

ARRAY<STRUCT<ARRAY<>>>[
  {ARRAY<STRING>[known order:
     "-9223372036854775808",
     "9223372036854775807"
   ]}
]
==
[name=json_lax_string_array_int_too_big]
SELECT LAX_STRING_ARRAY(JSON '[1e100]');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>["1e+100"]}]
==
[name=json_lax_string_array_numbers_float_limits]
SELECT LAX_STRING_ARRAY(JSON '[-3.40282e+38, 1.17549e-38, 3.40282e+38]');
--

ARRAY<STRUCT<ARRAY<>>>[
  {ARRAY<STRING>[known order:"-3.40282e+38", "1.17549e-38", "3.40282e+38"]}
]
==
[name=json_lax_string_array_numbers_double_limits]
SELECT LAX_STRING_ARRAY(JSON '[-1.79769e+308, 2.22507e-308, 1.79769e+308]');
--

ARRAY<STRUCT<ARRAY<>>>[
  {ARRAY<STRING>[known order:"-1.79769e+308", "2.22507e-308", "1.79769e+308"]}
]
==
[name=json_lax_string_array_objects]
SELECT LAX_STRING_ARRAY(JSON '[{"a": 1}, {"b": "foo"}]');
--

ARRAY<STRUCT<ARRAY<>>>[{ARRAY<STRING>[known order:NULL, NULL]}]
==
[name=json_lax_string_array_arrays]
SELECT LAX_STRING_ARRAY(JSON '[[1], [1.0], ["1"], [null], [true]]');
--

ARRAY<STRUCT<ARRAY<>>>[
  {ARRAY<STRING>[known order:NULL, NULL, NULL, NULL, NULL]}
]
==
[name=json_lax_string_array_mixed]
SELECT LAX_STRING_ARRAY(JSON '[null, true, 1, "1", "foo", {"a": 1}, [1]]');
--

ARRAY<STRUCT<ARRAY<>>>[
  {ARRAY<STRING>[known order:NULL, "true", "1", "1", "foo", NULL, NULL]}
]
