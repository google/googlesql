[default required_features=JSON_TYPE,JSON_MORE_VALUE_EXTRACTION_FUNCTIONS]
[name=json_float_integer_zero]
SELECT FLOAT(JSON '0');
--
ARRAY<STRUCT<FLOAT>>[{0}]
==
[name=json_float_integer_positive]
SELECT FLOAT(JSON '1');
--
ARRAY<STRUCT<FLOAT>>[{1}]
==
[name=json_float_integer_negative]
SELECT FLOAT(JSON '-1');
--
ARRAY<STRUCT<FLOAT>>[{-1}]
==
[name=json_float_integer_number_positive]
SELECT FLOAT(JSON '1.0');
--
ARRAY<STRUCT<FLOAT>>[{1}]
==
[name=json_float_integer_number_negative]
SELECT FLOAT(JSON '-1.0');
--
ARRAY<STRUCT<FLOAT>>[{-1}]
==
[name=json_float_integer_float_positive_threshold]
\-- The biggest integer that can be represented without precision loss.
SELECT FLOAT(JSON '16777216');
--
ARRAY<STRUCT<FLOAT>>[{16777216}]
==
[name=json_float_integer_float_negative_threshold]
\-- The smallest integer that can be represented without precision loss.
SELECT FLOAT(JSON '-16777216');
--
ARRAY<STRUCT<FLOAT>>[{-16777216}]
==
[name=json_float_integer_float_overflow_round]
SELECT FLOAT(JSON '16777217');
--
ARRAY<STRUCT<FLOAT>>[{16777216}]
==
[name=json_float_integer_float_underflow_round]
SELECT FLOAT(JSON '-16777217');
--
ARRAY<STRUCT<FLOAT>>[{-16777216}]
==
[name=json_float_integer_float_overflow_exact]
[required_features=JSON_TYPE,NAMED_ARGUMENTS,JSON_MORE_VALUE_EXTRACTION_FUNCTIONS]
SELECT FLOAT(JSON '16777217', wide_number_mode=>'exact');
--
ERROR: generic::out_of_range: JSON number: 16777217 cannot be converted to FLOAT without loss of precision
==
[name=json_float_integer_float_underflow_exact]
[required_features=JSON_TYPE,NAMED_ARGUMENTS,JSON_MORE_VALUE_EXTRACTION_FUNCTIONS]
SELECT FLOAT(JSON '-16777217', wide_number_mode=>'exact');
--
ERROR: generic::out_of_range: JSON number: -16777217 cannot be converted to FLOAT without loss of precision
==
[name=json_float_number_positive]
SELECT FLOAT(JSON '1.5');
--
ARRAY<STRUCT<FLOAT>>[{1.5}]
==
[name=json_float_number_negative]
SELECT FLOAT(JSON '-1.5');
--
ARRAY<STRUCT<FLOAT>>[{-1.5}]
==
[name=json_float_number_float_min]
SELECT FLOAT(JSON '1.17549e-38');
--
ARRAY<STRUCT<FLOAT>>[{1.17549e-38}]
==
[name=json_float_number_float_lowest]
SELECT FLOAT(JSON '-3.40282e+38');
--
ARRAY<STRUCT<FLOAT>>[{-3.40282e+38}]
==
[name=json_float_number_float_max]
SELECT FLOAT(JSON '3.40282e+38');
--
ARRAY<STRUCT<FLOAT>>[{3.40282e+38}]
==
[name=json_float_number_float_underflow_round]
SELECT FLOAT(JSON '-3.402821e+38');
--
ARRAY<STRUCT<FLOAT>>[{-3.402821e+38}]
==
[name=json_float_number_float_overflow_round]
SELECT FLOAT(JSON '3.402821e+38');
--
ARRAY<STRUCT<FLOAT>>[{3.402821e+38}]
==
[name=json_float_number_float_underflow_exact]
[required_features=JSON_TYPE,NAMED_ARGUMENTS,JSON_MORE_VALUE_EXTRACTION_FUNCTIONS]
SELECT FLOAT(JSON '-3.402821e+38', wide_number_mode=>'exact');
--
ERROR: generic::out_of_range: JSON number: -3.40282e+38 cannot be converted to FLOAT without loss of precision
==
[name=json_float_number_float_overflow_exact]
[required_features=JSON_TYPE,NAMED_ARGUMENTS,JSON_MORE_VALUE_EXTRACTION_FUNCTIONS]
SELECT FLOAT(JSON '3.402821e+38', wide_number_mode=>'exact');
--
ERROR: generic::out_of_range: JSON number: 3.40282e+38 cannot be converted to FLOAT without loss of precision
==
[name=json_float_number_big]
SELECT FLOAT(JSON '1e100');
--
ERROR: generic::out_of_range: JSON number: 1e+100 cannot be converted to FLOAT
==
[name=json_float_sql_null]
SELECT FLOAT(NULL);
--
ARRAY<STRUCT<FLOAT>>[{NULL}]
==
[name=json_float_null]
SELECT FLOAT(JSON 'null');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
==
[name=json_float_bool_true]
SELECT FLOAT(JSON 'true');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
==
[name=json_float_bool_false]
SELECT FLOAT(JSON 'false');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
==
[name=json_float_string]
SELECT FLOAT(JSON '"foo"');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
==
[name=json_float_string_empty]
SELECT FLOAT(JSON '""');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
==
[name=json_float_string_integer_positive]
SELECT FLOAT(JSON '"1"');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
==
[name=json_float_string_integer_negative]
SELECT FLOAT(JSON '"-1"');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
==
[name=json_float_string_number_positive]
SELECT FLOAT(JSON '"1.5"');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
==
[name=json_float_string_number_negative]
SELECT FLOAT(JSON '"-1.5"');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
==
[name=json_float_array]
SELECT FLOAT(JSON '[1]');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
==
[name=json_float_object]
SELECT FLOAT(JSON '{"a":1}');
--
ERROR: generic::out_of_range: The provided JSON input is not a number
